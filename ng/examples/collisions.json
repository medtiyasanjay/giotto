{"title": "Collision Detection", "html": {"main": "<h3 class=\"text-center\">Collision Detection</h3>\n\n<div class=\"container-fluid\">\n  <div class=\"row\">\n    <div class=\"col-sm-10\">\n      <div data-options=\"gexamples.force1\" style=\"width: 100%;\" giotto-force></div>\n    </div>\n    <div class=\"col-sm-2 small\">\n     <div data-jstats></div>\n      <lux-form data-options='luxforms.collision_i5fto'><script>if (!this.luxforms) {this.luxforms = {};} this.luxforms.collision_i5fto = {\"field\": {\"id\": \"collision_i5fto\", \"type\": \"form\", \"model\": \"Collision\"}, \"children\": [{\"field\": {\"type\": \"fieldset\"}, \"children\": [{\"field\": {\"options\": [\"svg\", \"canvas\"], \"type\": \"select\", \"required\": true, \"value\": \"svg\", \"name\": \"type\"}}, {\"field\": {\"name\": \"gravity\", \"max\": 1, \"type\": \"number\", \"required\": true, \"value\": 0.05, \"min\": 0}}, {\"field\": {\"type\": \"number\", \"required\": true, \"value\": -0.02, \"name\": \"charge\"}}, {\"field\": {\"name\": \"friction\", \"max\": 1, \"type\": \"number\", \"required\": true, \"value\": 0.9, \"min\": 0}}]}]};</script></lux-form>\n    </div>\n  </div>\n</div>\n\n<script>\n\n    gexamples.force1 = {\n        margin: {top:0, left:0, right:0, bottom:0},\n        nodes: 150,\n        minRadius: 0.005,\n        maxRadius: 0.02,\n        gravity: 0.05,\n        charge: -0.02,\n\n        height: '60%',\n\n        model: 'CollisionFormModel',\n\n        point: {\n            color: '#555',\n            width: 1,\n            fillOpacity: 1\n        },\n\n        onInit: function (force) {\n\n            var opts = force.options(),\n                root = {fixed: true, radius: 0, x: -1, y: -1},\n                paper = force.paper(),\n                charge = force.charge();\n\n            // Add nodes\n            force.nodes(d3.range(+opts.nodes).map(function() {\n                var minRadius = +opts.minRadius,\n                    maxRadius = +opts.maxRadius,\n                    dr = maxRadius > minRadius ? maxRadius - minRadius : 0;\n                return {radius: paper.dim(Math.random() * dr + minRadius)};\n            })).addNode(root);\n\n            if (typeof charge !== 'function')\n                force.charge(opts._charge(charge));\n\n            //force.drawQuadTree();\n            force.drawPoints();\n\n            paper.on(\"mousemove\", function() {\n                var p1 = d3.mouse(this);\n                root.x = paper.xfromPX(p1[0]);\n                root.y = paper.yfromPX(p1[1]);\n                force.resume();\n            }).on(\"touchmove\", function() {\n                var p1 = d3.touches(this);\n                root.x = paper.xfromPX(p1[0][0]);\n                root.y = paper.yfromPX(p1[0][1]);\n                force.resume();\n            });\n\n            force.on(\"tick\", function(e) {\n                force.collide();\n                paper.render();\n            });\n        },\n\n        // Callback when angular directive\n        angular: function (force, opts) {\n\n            opts.scope.$on('formFieldChange', function (e, model) {\n                var value = model.form[model.field];\n\n                if (model.field === 'friction' && value)\n                    force.friction(value);\n                else if (model.field === 'gravity')\n                    force.gravity(value);\n                else if (model.field === 'charge')\n                    force.charge(opts._charge(value));\n                else if (model.field === 'type') {\n                    // rebuild paper\n                    opts.type = value;\n                    force.paper(true);\n                    opts.onInit(force);\n                }\n                force.resume();\n            });\n\n        },\n\n        _charge: function (value) {\n            return function (d) {\n                return d.fixed ? value : 0;\n            };\n        }\n    };\n</script>\n\n<p>Javascript code:</p>\n<pre><code>gexamples.force1 = {\n    margin: {top:0, left:0, right:0, bottom:0},\n    nodes: 150,\n    minRadius: 0.005,\n    maxRadius: 0.02,\n    gravity: 0.05,\n    charge: -0.02,\n\n    height: '60%',\n\n    model: 'CollisionFormModel',\n\n    point: {\n        color: '#555',\n        width: 1,\n        fillOpacity: 1\n    },\n\n    onInit: function (force) {\n\n        var opts = force.options(),\n            root = {fixed: true, radius: 0, x: -1, y: -1},\n            paper = force.paper(),\n            charge = force.charge();\n\n        // Add nodes\n        force.nodes(d3.range(+opts.nodes).map(function() {\n            var minRadius = +opts.minRadius,\n                maxRadius = +opts.maxRadius,\n                dr = maxRadius &gt; minRadius ? maxRadius - minRadius : 0;\n            return {radius: paper.dim(Math.random() * dr + minRadius)};\n        })).addNode(root);\n\n        if (typeof charge !== 'function')\n            force.charge(opts._charge(charge));\n\n        //force.drawQuadTree();\n        force.drawPoints();\n\n        paper.on(\"mousemove\", function() {\n            var p1 = d3.mouse(this);\n            root.x = paper.xfromPX(p1[0]);\n            root.y = paper.yfromPX(p1[1]);\n            force.resume();\n        }).on(\"touchmove\", function() {\n            var p1 = d3.touches(this);\n            root.x = paper.xfromPX(p1[0][0]);\n            root.y = paper.yfromPX(p1[0][1]);\n            force.resume();\n        });\n\n        force.on(\"tick\", function(e) {\n            force.collide();\n            paper.render();\n        });\n    },\n\n    // Callback when angular directive\n    angular: function (force, opts) {\n\n        opts.scope.$on('formFieldChange', function (e, model) {\n            var value = model.form[model.field];\n\n            if (model.field === 'friction' &amp;&amp; value)\n                force.friction(value);\n            else if (model.field === 'gravity')\n                force.gravity(value);\n            else if (model.field === 'charge')\n                force.charge(opts._charge(value));\n            else if (model.field === 'type') {\n                // rebuild paper\n                opts.type = value;\n                force.paper(true);\n                opts.onInit(force);\n            }\n            force.resume();\n        });\n\n    },\n\n    _charge: function (value) {\n        return function (d) {\n            return d.fixed ? value : 0;\n        };\n    }\n};\n</code></pre>"}, "name": "collisions", "content_type": "text/html", "api_url": "http://quantmind.github.io/giotto/ng/examples/collisions.json", "modified": "2014-12-08T08:41:10", "site": {"year": 2014, "media": "/media", "python_version": "3.4.2", "date": "2014-12-11T22-59-42", "template_engine": null, "url": "http://quantmind.github.io/giotto", "template": "examples.md", "name": "Lux", "lux_version": "0.1.2-alpha.1"}, "slug": "collisions", "image": "http://quantmind.github.io/giotto/examples/collisions/collision.svg", "date": "2014-11-28T00:00:00", "head": {"title": "Collision Detection", "twitter:card": "summary_large_image"}, "html_url": "http://quantmind.github.io/giotto/examples/collisions"}